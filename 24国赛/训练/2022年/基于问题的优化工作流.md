# 基于问题的优化工作流

## optimproblem 创建最大化问题对象

使用 [`optimproblem`](l) 创建一个优化问题对象。问题对象是一个容器，您可以在其中定义目标表达式和约束。优化问题对象将定义问题和问题变量中存在的任何边界。

```matlab
prob = optimproblem('ObjectiveSense','maximize');

```

### 添加问题的表达式

```matlab
prob.Objective = sum(sum(f.*x));

```

### 创建约束条件

```matlab
onesum = sum(x,2) == 1;
vertsum = sum(x,1) <= 1;
prob.Constraints.onesum = onesum;
prob.Constraints.vertsum = vertsum;
```

## optimvar 创建符号变量

```
x = optimvar('x',15,3,'Type','integer','LowerBound',0,'UpperBound',1);
```

### 非线性问题设置变量初始值

```matlab
x0.x = randn(size(x));
x0.y = eye(4); % Assumes y is a 4-by-4 variable
```

## 选择求解器**optimoptions**

```matlab
prob = optimproblem('Objective',expr);
options = optimoptions(prob)
options.Display = 'iter';
sol = solve(prob,'Options',options);
```

## 使用solve 求解

```matlab
sol = solve(prob);
% Or, for nonlinear problems,
sol = solve(prob,x0)
```

